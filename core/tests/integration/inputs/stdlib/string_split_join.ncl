# test.type = 'pass'

let {string, ..} = std in

[
  # string.join
  string.join " " ["Hello", "ä¸–ç•Œ"] == "Hello ä¸–ç•Œ",
  string.join "anything" [] == "",
  string.join "a" ["b", "n", "n", ""] == "banana",

  # string.split
  string.split "," "1,2,3" == ["1", "2", "3"],
  string.split "" "123" == ["1", "2", "3"],
  string.split "â¤" "ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨" == ["ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨"],
  string.split "â€" "ğŸ˜¶â€ğŸŒ«ï¸" == ["ğŸ˜¶â€ğŸŒ«ï¸"],
  string.split "ğŸ˜¶â€ğŸŒ«ï¸" "ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ˜¶â€ğŸŒ«ï¸ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨" == ["ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨", "ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨"],
  string.split "" "" == [],
  string.split "x" "abc" == ["abc"],
  string.split "â¤" "iâ¤u" == ["i", "u"],
  string.split "abc" "xabcyabcz" == ["x", "y", "z"],
  string.split "â¤â¤" "xâ¤â¤yâ¤z" == ["x", "yâ¤z"],
  string.split "a" "abacus" == ["", "b", "cus"],
  string.split "a" "banana" == ["b", "n", "n"],
  string.split "ağŸ‘¨" "ağŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨" == ["ağŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨"],

  # string.split/string.join roundtrip
  std.array.all (fun {sep, str} => str == string.join sep (string.split sep str)) [
    { sep = ",", str = "a,b,c,d,e,f,g" },
    { sep = ":", str = "1:2:3:4:5" },
    { sep = "--", str = "yes--no--maybe--x--y--z" },
    { sep = " ", str = "this is a sentence."},
    { sep = "ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨", str = "-ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨-" },
  ],
] |> std.test.assert_all
