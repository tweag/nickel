# test.type = 'pass'
let {check, ..} = import "../lib/assert.ncl" in
let {string, ..} = std in

[
  # string.join
  string.join " " ["Hello", "ä¸–ç•Œ"] == "Hello ä¸–ç•Œ",
  string.join "anything" [] == "",
  string.join "a" ["b", "n", "n", ""] == "banana",

  # string.split
  string.split "," "1,2,3" == ["1", "2", "3"],
  string.split "" "123" == ["1", "2", "3"],
  string.split "â¤" "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨" == ["ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨"],
  string.split "â€" "ðŸ˜¶â€ðŸŒ«ï¸" == ["ðŸ˜¶â€ðŸŒ«ï¸"],
  string.split "ðŸ˜¶â€ðŸŒ«ï¸" "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ðŸ˜¶â€ðŸŒ«ï¸ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨" == ["ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨", "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨"],
  string.split "" "" == [],
  string.split "x" "abc" == ["abc"],
  string.split "â¤" "iâ¤u" == ["i", "u"],
  string.split "abc" "xabcyabcz" == ["x", "y", "z"],
  string.split "â¤â¤" "xâ¤â¤yâ¤z" == ["x", "yâ¤z"],
  string.split "a" "abacus" == ["", "b", "cus"],
  string.split "a" "banana" == ["b", "n", "n"],
  string.split "aðŸ‘¨" "aðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨" == ["aðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨"],

  # string.split/string.join roundtrip
  std.array.all (fun {sep, str} => str == string.join sep (string.split sep str)) [
    { sep = ",", str = "a,b,c,d,e,f,g" },
    { sep = ":", str = "1:2:3:4:5" },
    { sep = "--", str = "yes--no--maybe--x--y--z" },
    { sep = " ", str = "this is a sentence."},
    { sep = "ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨", str = "-ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨-" },
  ],
] |> check
